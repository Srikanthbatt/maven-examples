pipeline {
   agent any

   stages {
       stage('Checkout') {
           steps {
               checkout scm
           }
       }

       stage('Build Backend') {
           steps {
               sh 'mvn clean install' // Assuming Maven is used for Spring Boot
           }
       }

       stage('Build Frontend') {
           steps {
               sh 'npm install' // Install frontend dependencies
               sh 'npm run build' // Build Angular app
           }
       }

       stage('Database Setup') {
           steps {
               script {
                   def dbUser = 'your_db_username'
                   def dbPassword = 'your_db_password'
                   def dbName = 'employeedb'

                   sh "mysql -u ${dbUser} -p${dbPassword} -e 'USE ${dbName}'"
               }
           }
       }

       stage('Deploy Backend') {
           steps {
               // Deploy the Spring Boot application, e.g., using Docker or other means
           }
       }

       stage('Deploy Frontend') {
           steps {
               // Deploy the Angular frontend to a web server or CDN
           }
       }

       stage('Test') {
           steps {
               // Run tests for the application (backend and frontend)
           }
       }

       stage('Cleanup') {
           steps {
               // Perform any cleanup or post-deployment tasks
           }
       }
   }

   post {
       success {
           // Notify or perform actions on success
       }
       failure {
           // Notify or perform actions on failure
       }
   }
}
